<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca de Posições</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>


  <!-- ===== Tela Inicial ===== -->
  <div id="home" class="screen" style="display:none;">
    <h1><i class="fa-solid fa-sitemap"></i> Biblioteca de Posições</h1>
    <div class="carousel">
      <div class="carousel-track" id="carousel-track"></div>
    </div>
    <a href="index.html" class="main-menu-btn">Voltar ao Menu Principal</a>
  </div>

  <!-- ===== Tela Detalhe ===== -->
  <div id="detalhe" class="screen" style="display:none;">
    <h1 id="detalhe-titulo"></h1>
    <div id="detalhe-grid"></div>
    <button class="back-btn" onclick="voltarHome()">Voltar</button>
  </div>

  <!-- ===== Botão flutuante ===== -->
  <button id="add-btn"><i class="fa-solid fa-plus"></i></button>

  <!-- ===== Modal ===== -->
  <div id="modal">
    <div class="modal-content">
      <h2>Adicionar Nova Posição</h2>
      <input type="text" id="novaNome" placeholder="Nome da posição" required>
      <select id="novaTipo">
        <option value="Guarda">Guarda</option>
        <option value="Passagem">Passagem</option>
        <option value="Controle">Controle</option>
        <option value="Finalização">Finalização</option>
        <option value="Queda">Queda</option>
      </select>
      <textarea id="novaDesc" rows="3" placeholder="Descrição da posição"></textarea>
      <div>
        <button class="btn-save" onclick="salvarPosicao()">Salvar</button>
        <button class="btn-cancel" onclick="fecharModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Sons =====
    function playSound(file) {
      const audio = new Audio(file);
      audio.volume = 0.5;
      audio.play();
    }

    // ===== Dados iniciais =====
    const categorias = JSON.parse(localStorage.getItem("posicoesData")) || {
      Guarda: { icon: '<i class="fa-solid fa-shield-halved"></i>', posicoes: [
        { nome: 'Guarda Fechada', desc: 'Controle com pernas cruzadas.' },
        { nome: 'Guarda Aberta', desc: 'Controle de distância.' },
        { nome: 'Guarda Aranha', desc: 'Usa pés nos bíceps.' },
        { nome: 'Guarda Borboleta', desc: 'Ganchos para raspar.' },
        { nome: 'Guarda De La Riva', desc: 'Gancho na perna.' },
        { nome: 'Guarda X', desc: 'Estrutura em X.' },
        { nome: 'Guarda 50/50', desc: 'Controle simétrico.' },
        { nome: 'Guarda Laço', desc: 'Perna enrolada no braço.' },
        { nome: 'Guarda Lapela', desc: 'Usa lapela como trava.' },
        { nome: 'Guarda Worm', desc: 'Guarda moderna com lapela.' },
        { nome: 'RDLR', desc: 'Reverse De La Riva.' },
        { nome: 'Single Leg X', desc: 'Controle de uma perna.' },
        { nome: 'X-Deep', desc: 'X profundo.' },
        { nome: 'Shin to Shin', desc: 'Contato canela com canela.' },
        { nome: 'Octopus', desc: 'Controle lateral.' },
        { nome: 'Tripé', desc: 'Controle de pé e calcanhar.' },
        { nome: 'Guarda Berimbolo', desc: 'Entrada para costas.' },
        { nome: 'Spider Lasso', desc: 'Combina aranha e laço.' },
        { nome: 'Guarda Invertida', desc: 'Ataque de baixo.' },
        { nome: 'K-Guard', desc: 'Entrada para leg locks.' }
      ]},
      Passagem: { icon: '<i class="fa-solid fa-right-left"></i>', posicoes: [
        { nome: 'Torreando', desc: 'Contorna pernas.' },
        { nome: 'Knee Cut', desc: 'Joelho corta a guarda.' },
        { nome: 'Smash Pass', desc: 'Pressão constante.' },
        { nome: 'Leg Drag', desc: 'Arrasta a perna.' },
        { nome: 'Over-Under', desc: 'Uma perna por cima e outra por baixo.' },
        { nome: 'Double Under', desc: 'Abraço por baixo das pernas.' },
        { nome: 'Standing Pass', desc: 'Passagem em pé.' },
        { nome: 'Long Step', desc: 'Passo longo lateral.' },
        { nome: 'Back Step', desc: 'Giro de quadril.' },
        { nome: 'Stack Pass', desc: 'Empilha o adversário.' },
        { nome: 'Duck Walk', desc: 'Abaixa e passa.' },
        { nome: 'Cartwheel', desc: 'Estrela por cima.' },
        { nome: 'Body Lock', desc: 'Trava quadril e tronco.' },
        { nome: 'Shin Slice', desc: 'Variante do knee cut.' },
        { nome: 'Leg Weave', desc: 'Entrelaça pernas.' },
        { nome: 'X-Pass', desc: 'Explosiva troca de base.' },
        { nome: 'Lapela Smash', desc: 'Travando com lapela.' },
        { nome: 'Jump Over', desc: 'Salta sobre a guarda.' },
        { nome: 'Passagem Blitz', desc: 'Rápida e agressiva.' },
        { nome: 'Passagem Técnica', desc: 'Controle cadenciado.' }
      ]},
      Controle: { icon: '<i class="fa-solid fa-user-shield"></i>', posicoes: [
        { nome: 'Montada', desc: 'Sentado no torso.' },
        { nome: '100kg', desc: 'Controle lateral.' },
        { nome: 'Pegada de Costas', desc: 'Com seatbelt.' },
        { nome: 'North-South', desc: 'Cabeça nos pés.' },
        { nome: 'Knee on Belly', desc: 'Joelho no abdômen.' },
        { nome: 'Turtle Control', desc: 'Controle da tartaruga.' },
        { nome: 'Half Guard Top', desc: 'Por cima da meia guarda.' },
        { nome: 'Crossface', desc: 'Pressão no rosto.' },
        { nome: 'Reverse Side', desc: 'Lateral invertida.' },
        { nome: 'S-Mount', desc: 'Montada em S.' },
        { nome: 'Backpack', desc: 'Controle em pé.' },
        { nome: 'Body Triangle', desc: 'Triângulo nas costas.' },
        { nome: 'Head & Arm', desc: 'Cabeça e braço.' },
        { nome: 'Crucifixo', desc: 'Braço e cabeça presos.' },
        { nome: 'Twister Side', desc: 'Controle lateral twister.' },
        { nome: 'High Mount', desc: 'Montada alta.' },
        { nome: 'Low Mount', desc: 'Montada baixa.' },
        { nome: 'Kesa Gatame', desc: 'Estilo judô.' },
        { nome: 'Scarf Hold', desc: 'Braço e quadril.' },
        { nome: 'Reverse Mount', desc: 'Montada invertida.' }
      ]},
      Finalização: { icon: '<i class="fa-solid fa-lock"></i>', posicoes: [
        { nome: 'Armlock', desc: 'Chave de braço.' },
        { nome: 'Mata-Leão', desc: 'Estrangulamento costas.' },
        { nome: 'Triângulo', desc: 'Estrangulamento pernas.' },
        { nome: 'Omoplata', desc: 'Chave de ombro.' },
        { nome: 'Kimura', desc: 'Chave de ombro.' },
        { nome: 'Americana', desc: 'Chave de braço.' },
        { nome: 'Ezequiel', desc: 'Estrangulamento gola.' },
        { nome: 'Botinha', desc: 'Chave de tornozelo.' },
        { nome: 'Chave de Calcanhar', desc: 'Heel hook.' },
        { nome: 'Chave de Joelho', desc: 'Kneebar.' },
        { nome: 'Arm Triangle', desc: 'Triângulo de braço.' },
        { nome: 'Guillotine', desc: 'Estrangulamento frontal.' },
        { nome: 'Baseball Choke', desc: 'Com gola.' },
        { nome: 'Bow and Arrow', desc: 'Arco e flecha.' },
        { nome: 'Cross Collar', desc: 'Gola cruzada.' },
        { nome: 'North-South Choke', desc: 'Do north-south.' },
        { nome: 'Darce', desc: 'Triângulo invertido.' },
        { nome: 'Anaconda', desc: 'Semelhante ao Darce.' },
        { nome: 'Wrist Lock', desc: 'Chave de punho.' },
        { nome: 'Triangle Armbar', desc: 'Triângulo + armlock.' }
      ]},
      Queda: { icon: '<i class="fa-solid fa-arrow-down"></i>', posicoes: [
        { nome: 'Double Leg', desc: 'Ataque às duas pernas.' },
        { nome: 'Single Leg', desc: 'Ataque a uma perna.' },
        { nome: 'O Soto Gari', desc: 'Varrida externa.' },
        { nome: 'Seoi Nage', desc: 'Arremesso de ombro.' },
        { nome: 'Tomoe Nage', desc: 'Sacrifício frontal.' },
        { nome: 'Harai Goshi', desc: 'Projeção de quadril.' },
        { nome: 'Uchi Mata', desc: 'Projeção interna.' },
        { nome: 'Kouchi Gari', desc: 'Varrida curta interna.' },
        { nome: 'Sumi Gaeshi', desc: 'Sacrifício com gancho.' },
        { nome: 'Tai Otoshi', desc: 'Projeção de corpo.' },
        { nome: 'Kosoto Gari', desc: 'Varrida curta externa.' },
        { nome: 'Ouchi Gari', desc: 'Varrida longa interna.' },
        { nome: 'Hiza Guruma', desc: 'Projeção no joelho.' },
        { nome: 'De Ashi Barai', desc: 'Varredura de pé.' },
        { nome: 'Yoko Tomoe', desc: 'Sacrifício lateral.' },
        { nome: 'Kata Guruma', desc: 'Roda de ombro.' },
        { nome: 'Morote Seoi', desc: 'Ombro com duas mãos.' },
        { nome: 'Osoto Otoshi', desc: 'Projeção direta.' },
        { nome: 'Ura Nage', desc: 'Suplex.' },
        { nome: 'Makikomi', desc: 'Arremesso girando corpo.' }
      ]}
    };

    const home = document.getElementById("home");
    const detalhe = document.getElementById("detalhe");
    const detalheGrid = document.getElementById("detalhe-grid");
    const detalheTitulo = document.getElementById("detalhe-titulo");
    const track = document.getElementById("carousel-track");
    const modal = document.getElementById("modal");

  

    // ===== Renderizar tela inicial =====
    function renderHome() {
      track.innerHTML = "";
      Object.keys(categorias).forEach(cat => {
        const card = document.createElement("div");
        card.className = "categoria-card";
        card.onclick = () => abrirDetalhe(cat);
        card.innerHTML = `<div class="icon">${categorias[cat].icon}</div><h3>${cat}</h3>`;
        track.appendChild(card);
      });
    }
    renderHome();

    // ===== Carrossel automático =====
    let index = 0;
    setInterval(() => {
      index = (index + 1) % Object.keys(categorias).length;
      track.style.transform = `translateX(-${index * 100}%)`;
    }, 3000);

    // ===== Abrir detalhe =====
    function abrirDetalhe(cat) {
      home.style.display = "none";
      detalhe.style.display = "flex";
      detalheTitulo.innerText = cat;
      detalheGrid.innerHTML = "";
      categorias[cat].posicoes.forEach(p => {
        const card = document.createElement("div");
        card.className = "posicao-card";
        card.onclick = () => alert(`Você clicou em ${p.nome}`);
        card.innerHTML = `<h4>${p.nome}</h4><p>${p.desc}</p>`;
        detalheGrid.appendChild(card);
      });
    }

    // ===== Voltar =====
    function voltarHome() {
      detalhe.style.display = "none";
      home.style.display = "block";
    }

    // ===== Modal =====
    document.getElementById("add-btn").onclick = () => {
      modal.style.display = "flex";
      playSound('sounds/click.mp3');
    };
    function fecharModal() { modal.style.display = "none"; }

    // ===== Salvar nova posição =====
    function salvarPosicao() {
      const nome = document.getElementById("novaNome").value.trim();
      const tipo = document.getElementById("novaTipo").value;
      const desc = document.getElementById("novaDesc").value.trim();

      if (!nome || !desc) { 
        alert("Preencha todos os campos!"); 
        return; 
      }

      categorias[tipo].posicoes.push({ nome, desc });
      localStorage.setItem("posicoesData", JSON.stringify(categorias));
      fecharModal();
      renderHome();
      playSound('sounds/success.mp3');
      alert("Nova posição adicionada!");
    }
  </script>
</body>
</html>