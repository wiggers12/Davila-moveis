<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca de Posições</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <style>
    #posicoes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      padding: 25px;
    }
    .posicao-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow);
      border: 1px solid transparent;
      backdrop-filter: blur(12px);
      overflow: hidden;
      position: relative;
    }
    .posicao-card:hover {
      transform: translateY(-6px) scale(1.03);
      border-color: var(--gold);
      box-shadow: 0 0 25px rgba(212,175,55,0.4);
    }
    .posicao-card .icon {
      font-size: 44px;
      margin-bottom: 12px;
      color: var(--gold);
    }
    .posicao-card h3 {
      margin: 0 0 15px;
      font-size: 1.6em;
      color: var(--white);
    }
    /* ===== CARROSSEL ===== */
    .carousel {
      display: flex;
      width: 100%;
      overflow: hidden;
      position: relative;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.7s ease;
      width: 100%;
    }
    .carousel-item {
      flex: 0 0 100%;
      box-sizing: border-box;
      padding: 10px;
    }
    .carousel-item h4 {
      margin: 0 0 8px;
      font-size: 1.2em;
      color: var(--gold);
    }
    .carousel-item p {
      margin: 0;
      font-size: 0.95em;
      color: var(--gray);
    }

    /* ===== BOTÃO FLUTUANTE ===== */
    .fab {
      position: fixed;
      bottom: 25px;
      right: 25px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--gold);
      color: var(--bg-dark);
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      transition: transform .25s;
      z-index: 1100;
    }
    .fab:hover {
      transform: scale(1.1);
      background: var(--gold-light);
    }

    /* ===== MODAL ===== */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1200;
    }
    .modal-content {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      max-width: 500px;
      width: 90%;
      box-shadow: var(--shadow);
      animation: fadeIn .3s ease;
      text-align: center;
    }
    .modal-content h2 {
      color: var(--gold);
      margin-bottom: 15px;
    }
    .modal-content input, 
    .modal-content select, 
    .modal-content textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 12px;
      border-radius: 8px;
      border: none;
      background: rgba(255,255,255,0.08);
      color: var(--white);
      font-size: 1em;
    }
    .modal-content textarea { resize: vertical; }
    .modal-content button {
      background: var(--gold);
      color: var(--bg-dark);
      font-weight: bold;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: all .25s;
      margin: 5px;
    }
    .modal-content button:hover { background: var(--gold-light); }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="screen">
    <h1><i class="fa-solid fa-sitemap"></i> Biblioteca de Posições</h1>
    <div id="posicoes-grid"></div>
    <a href="index.html" class="main-menu-btn">Voltar ao Menu Principal</a>
  </div>

  <!-- Botão flutuante -->
  <div class="fab" onclick="abrirModal()"><i class="fa-solid fa-plus"></i></div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2>Adicionar Nova Posição</h2>
      <input type="text" id="novaNome" placeholder="Nome da posição" required>
      <select id="novaCategoria">
        <option value="Guarda">Guarda</option>
        <option value="Passagem">Passagem</option>
        <option value="Controle">Controle</option>
        <option value="Finalização">Finalização</option>
        <option value="Queda">Queda</option>
      </select>
      <textarea id="novaDesc" rows="3" placeholder="Descrição da posição"></textarea>
      <br>
      <button onclick="adicionarPosicao()">Salvar</button>
      <button onclick="fecharModal()">Cancelar</button>
    </div>
  </div>

  <script>
    // 100 posições pré-carregadas
    let categorias = JSON.parse(localStorage.getItem("categorias")) || {
      Guarda: {
        icon: '<i class="fa-solid fa-shield-halved"></i>',
        posicoes: [
          { nome: 'Guarda Fechada', desc: 'Controle com pernas cruzadas.' },
          { nome: 'Guarda Aberta', desc: 'Controle de distância.' },
          { nome: 'Guarda Borboleta', desc: 'Usa ganchos para raspar.' },
          { nome: 'Guarda Aranha', desc: 'Pés nos bíceps do adversário.' },
          { nome: 'De La Riva', desc: 'Gancho externo na perna.' },
          { nome: 'RDLR', desc: 'Reverse De La Riva.' },
          { nome: 'Guarda X', desc: 'Alavancas em X.' },
          { nome: 'Single Leg X', desc: 'Controle de uma perna.' },
          { nome: '50/50', desc: 'Posição neutra travada.' },
          { nome: 'Guarda Laço', desc: 'Perna enrolada no braço.' },
          { nome: 'Guarda Lapela', desc: 'Uso da lapela como trava.' },
          { nome: 'Worm Guard', desc: 'Controle moderno com lapela.' },
          { nome: 'K-Guard', desc: 'Entrada para ataques de perna.' },
          { nome: 'Guarda Octopus', desc: 'Controle lateral do tronco.' },
          { nome: 'Guarda Tripé', desc: 'Base de 3 pontos.' },
          { nome: 'Guarda Shin to Shin', desc: 'Contato de canelas.' },
          { nome: 'Guarda Z', desc: 'Meia guarda alta.' },
          { nome: 'Deep Half', desc: 'Meia guarda profunda.' },
          { nome: 'Berimbolo', desc: 'Raspagem para costas.' },
          { nome: 'Spider Lasso', desc: 'Aranha + laço.' }
        ]
      },
      Passagem: {
        icon: '<i class="fa-solid fa-right-left"></i>',
        posicoes: [
          { nome: 'Torreando', desc: 'Contorna as pernas.' },
          { nome: 'Knee Cut', desc: 'Joelho cortando a guarda.' },
          { nome: 'Over-Under', desc: 'Uma perna em cima e outra embaixo.' },
          { nome: 'Leg Drag', desc: 'Arrasta a perna e passa.' },
          { nome: 'Smash Pass', desc: 'Amassa com pressão.' },
          { nome: 'Stack Pass', desc: 'Empilha o adversário.' },
          { nome: 'X-Pass', desc: 'Explosiva com base.' },
          { nome: 'Long Step', desc: 'Passo longo e giro.' },
          { nome: 'Cartwheel Pass', desc: 'Passa girando estrela.' },
          { nome: 'Body Lock', desc: 'Trava quadril e tronco.' },
          { nome: 'Back Step', desc: 'Rotação de quadril.' },
          { nome: 'Double Under', desc: 'Abraça pernas por baixo.' },
          { nome: 'Shin Slice', desc: 'Variante de knee cut.' },
          { nome: 'Duck Walk', desc: 'Passagem agachada.' },
          { nome: 'Jump Over', desc: 'Salta por cima da guarda.' },
          { nome: 'Leg Weave', desc: 'Entrelaça pernas.' },
          { nome: 'Standing Pass', desc: 'Passa em pé.' },
          { nome: 'Lapela Smash', desc: 'Trava lapela.' },
          { nome: 'Hip Switch', desc: 'Troca rápida de base.' },
          { nome: 'Overhead Pass', desc: 'Passa levantando pernas.' }
        ]
      },
      Controle: {
        icon: '<i class="fa-solid fa-user-shield"></i>',
        posicoes: [
          { nome: 'Montada', desc: 'Sentado no torso.' },
          { nome: '100kg', desc: 'Controle lateral básico.' },
          { nome: 'Pegada de Costas', desc: 'Controle com ganchos.' },
          { nome: 'North-South', desc: 'Cabeça para baixo.' },
          { nome: 'Knee on Belly', desc: 'Joelho no abdômen.' },
          { nome: 'S-Mount', desc: 'Montada em S.' },
          { nome: 'Mount High', desc: 'Montada alta.' },
          { nome: 'Mount Low', desc: 'Montada baixa.' },
          { nome: 'Scarf Hold', desc: 'Controle estilo Kesa.' },
          { nome: 'Reverse Side', desc: 'Controle invertido.' },
          { nome: 'Crucifixo', desc: 'Braço e cabeça presos.' },
          { nome: 'Body Triangle', desc: 'Costas com triângulo.' },
          { nome: 'Head and Arm', desc: 'Cabeça e braço.' },
          { nome: 'Twister Side', desc: 'Controle Twister.' },
          { nome: 'Turtle Control', desc: 'Sobre quatro apoios.' },
          { nome: 'Backpack', desc: 'Costas em pé.' },
          { nome: 'Half Guard Top', desc: 'Superior na meia.' },
          { nome: 'Crossface', desc: 'Pressão no rosto.' },
          { nome: 'Reverse Mount', desc: 'Montada invertida.' },
          { nome: 'Side Control', desc: 'Controle lateral.' }
        ]
      },
      Finalização: {
        icon: '<i class="fa-solid fa-lock"></i>',
        posicoes: [
          { nome: 'Armlock', desc: 'Chave de braço.' },
          { nome: 'Mata-Leão', desc: 'Estrangulamento costas.' },
          { nome: 'Triângulo', desc: 'Estrangulamento pernas.' },
          { nome: 'Omoplata', desc: 'Chave de ombro.' },
          { nome: 'Kimura', desc: 'Chave de ombro.' },
          { nome: 'Americana', desc: 'Chave invertida.' },
          { nome: 'Ezequiel', desc: 'Estrangulamento manga.' },
          { nome: 'Botinha', desc: 'Chave tornozelo.' },
          { nome: 'Heel Hook', desc: 'Chave calcanhar.' },
          { nome: 'Kneebar', desc: 'Chave joelho.' },
          { nome: 'Guillotine', desc: 'Estrangulamento frontal.' },
          { nome: 'Darce', desc: 'Estrangulamento braço.' },
          { nome: 'Anaconda', desc: 'Estrangulamento invertido.' },
          { nome: 'Baseball Choke', desc: 'Estrangulamento lapela.' },
          { nome: 'Bow and Arrow', desc: 'Estrangulamento arco.' },
          { nome: 'Cross Collar', desc: 'Estrangulamento gola.' },
          { nome: 'North-South Choke', desc: 'Estrangulamento lateral.' },
          { nome: 'Wrist Lock', desc: 'Chave punho.' },
          { nome: 'Triangle Armbar', desc: 'Triângulo + braço.' },
          { nome: 'Katagatame', desc: 'Estrangulamento ombro.' }
        ]
      },
      Queda: {
        icon: '<i class="fa-solid fa-arrow-down"></i>',
        posicoes: [
          { nome: 'Double Leg', desc: 'Ataque às duas pernas.' },
          { nome: 'Single Leg', desc: 'Ataque a uma perna.' },
          { nome: 'O Soto Gari', desc: 'Varrida externa.' },
          { nome: 'Seoi Nage', desc: 'Arremesso de ombro.' },
          { nome: 'Tomoe Nage', desc: 'Queda sacrifício.' },
          { nome: 'Harai Goshi', desc: 'Projeção quadril.' },
          { nome: 'Uchi Mata', desc: 'Projeção interna.' },
          { nome: 'Kouchi Gari', desc: 'Pequena interna.' },
          { nome: 'Ouchi Gari', desc: 'Grande interna.' },
          { nome: 'Tai Otoshi', desc: 'Projeção corpo.' },
          { nome: 'Kata Guruma', desc: 'Roda ombro.' },
          { nome: 'Morote Seoi', desc: 'Seoi duas mãos.' },
          { nome: 'Sumi Gaeshi', desc: 'Sacrifício gancho.' },
          { nome: 'De Ashi Barai', desc: 'Varredura pé.' },
          { nome: 'Hiza Guruma', desc: 'Queda joelho.' },
          { nome: 'Yoko Tomoe', desc: 'Tomoe lateral.' },
          { nome: 'Ura Nage', desc: 'Suplex.' },
          { nome: 'Osoto Otoshi', desc: 'Projeção direta.' },
          { nome: 'Tani Otoshi', desc: 'Contra ataque.' },
          { nome: 'Sukui Nage', desc: 'Erguendo pernas.' }
        ]
      }
    };

    const grid = document.getElementById('posicoes-grid');

    function renderGrid() {
      grid.innerHTML = '';
      Object.keys(categorias).forEach(cat => {
        const card = document.createElement('div');
        card.className = 'posicao-card';
        card.innerHTML = `
          <div class="icon">${categorias[cat].icon}</div>
          <h3>${cat}</h3>
          <div class="carousel"><div class="carousel-track" id="track-${cat}"></div></div>
        `;
        grid.appendChild(card);

        const track = card.querySelector('.carousel-track');
        categorias[cat].posicoes.forEach(p => {
          const item = document.createElement('div');
          item.className = 'carousel-item';
          item.innerHTML = `<h4>${p.nome}</h4><p>${p.desc}</p>`;
          track.appendChild(item);
        });

        let index = 0;
        setInterval(() => {
          const items = track.querySelectorAll('.carousel-item');
          if (items.length === 0) return;
          index = (index + 1) % items.length;
          track.style.transform = `translateX(-${index * 100}%)`;
        }, 3000);
      });
    }

    function adicionarPosicao() {
      const nome = document.getElementById('novaNome').value.trim();
      const categoria = document.getElementById('novaCategoria').value;
      const desc = document.getElementById('novaDesc').value.trim();

      if (!nome || !desc) {
        alert("Preencha todos os campos!");
        return;
      }

      categorias[categoria].posicoes.push({ nome, desc });
      localStorage.setItem("categorias", JSON.stringify(categorias));

      fecharModal();
      renderGrid();
      alert("Posição adicionada com sucesso!");
    }

    function abrirModal() {
      document.getElementById('modal').style.display = 'flex';
    }
    function fecharModal() {
      document.getElementById('modal').style.display = 'none';
      document.getElementById('novaNome').value = '';
      document.getElementById('novaDesc').value = '';
    }

    // Render inicial
    renderGrid();
  </script>
</body>
</html>