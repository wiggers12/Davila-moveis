<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prot√≥tipo | A√ßa√≠ da Barra POA</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6a0dad; --secondary: #f39c12; --success: #2ecc71; --danger: #e74c3c;
            --dark-bg: #121212; --card-bg: #1e1e1e; --text-light: #f5f5f5; --text-muted: #aaa;
            --shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background: var(--dark-bg); color: var(--text-light); }

        /* --- Layout Geral --- */
        .container { max-width: 1200px; margin: auto; padding: 1.5rem; }
        .hidden { display: none !important; }

        /* --- Cabe√ßalho --- */
        header { background: var(--card-bg); text-align: center; padding: 1rem; border-bottom: 2px solid var(--primary); }
        
        /* --- Vitrine de Produtos --- */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .product-card { background: var(--card-bg); border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; cursor: pointer; transition: transform 0.3s; }
        .product-card:hover { transform: translateY(-8px); }
        .product-card img { width: 100%; height: 200px; object-fit: cover; }
        .product-info { padding: 1rem; }
        .product-info h3 { font-size: 1.25rem; }
        .product-info p { color: var(--text-muted); font-size: 0.9rem; }
        .product-price { font-weight: 700; color: var(--secondary); font-size: 1.3rem; margin-top: 0.5rem; }
        
        /* --- Modal de Personaliza√ß√£o --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; }
        .modal-content { background: var(--dark-bg); padding: 2rem; border-radius: 15px; width: 90%; max-width: 500px; border-top: 5px solid var(--primary); }
        .modal-content h3 { color: var(--secondary); }
        .customization-group { margin: 1.5rem 0; }
        .customization-group label { display: flex; align-items: center; gap: 10px; background: var(--card-bg); padding: 0.8rem; border-radius: 8px; margin-bottom: 0.5rem; }
        .btn { background: var(--primary); color: #fff; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; text-align: center; display: block; width: 100%; margin-top: 1rem; }
        .btn:hover { opacity: 0.9; }
        
        /* --- Carrinho e Pedidos --- */
        #cart-summary, #order-tracker { background: var(--card-bg); padding: 1.5rem; border-radius: 12px; margin-top: 2rem; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; border-bottom: 1px solid #333; padding-bottom: 1rem; }
        .item-details small { color: var(--text-muted); display: block; }
        .cart-total { text-align: right; font-size: 1.3rem; margin-top: 1rem; font-weight: bold; color: var(--secondary); }

        /* --- Rastreio de Pedido --- */
        .status-bar { display: flex; justify-content: space-between; margin: 1rem 0; }
        .status-step { flex: 1; text-align: center; color: var(--text-muted); position: relative; }
        .status-step.active { color: var(--success); font-weight: bold; }
        .status-step::before { content: '‚óè'; font-size: 2rem; }
        .status-step.active::after { content: ''; position: absolute; top: 15px; left: 50%; width: 100%; height: 4px; background: var(--success); z-index: -1; }

        /* --- Painel Admin --- */
        #admin-panel .order-card { background: var(--card-bg); padding: 1rem; margin-bottom: 1rem; border-radius: 8px; }
        #admin-panel select { background: #333; color: white; border: 1px solid var(--primary); padding: 0.5rem; border-radius: 5px; }

    </style>
</head>
<body>

    <main id="customer-view">
        <header>
            <h1>A√ßa√≠ da Barra POA üçß</h1>
            <p>Escolha e personalize seu pedido!</p>
        </header>
        <div class="container">
            <section id="menu">
                <h2>Card√°pio</h2>
                <div class="product-grid" id="product-list"></div>
            </section>

            <section id="cart-summary">
                <h2>Seu Pedido</h2>
                <div id="cart-items-container"><p>Carrinho vazio.</p></div>
                <div class="cart-total">Total: <span id="cart-total-price">R$ 0,00</span></div>
                <button class="btn" id="checkout-btn">Finalizar Pedido</button>
            </section>

            <section id="order-tracker" class="hidden">
                <h2>Acompanhe seu Pedido</h2>
                <div id="tracker-info"></div>
            </section>
        </div>
    </main>
    
    <main id="admin-panel" class="hidden">
       <header><h1>Painel de Gest√£o</h1></header>
       <div class="container">
            <h2>Pedidos Recebidos</h2>
            <div id="admin-orders-list"><p>Nenhum pedido recebido ainda.</p></div>
       </div>
    </main>

    <div id="customization-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modal-product-name">Personalize seu Produto</h3>
            <p id="modal-product-description"></p>
            <form id="customization-form">
                <input type="hidden" id="modal-product-id">
                <div id="modal-options"></div>
                <button type="submit" class="btn">Adicionar ao Pedido</button>
            </form>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- BANCO DE DADOS FICT√çCIO ---
    const PRODUCTS = [
        { id: 1, name: "A√ßa√≠ Tradicional", description: "O sabor cl√°ssico da Amaz√¥nia, puro e delicioso.", price: 15.00, image: "https://i.ibb.co/C0740pX/acai-300ml.jpg", category: "A√ßa√≠s" },
        { id: 2, name: "Barca de A√ßa√≠ M√©dia", description: "Perfeita para compartilhar, cheia de frutas e complementos.", price: 45.00, image: "https://i.ibb.co/rQxM89K/acai-barca.jpg", category: "Barcas" },
        { id: 3, name: "A√ßa√≠ com Cupua√ßu", description: "A combina√ß√£o perfeita do azedinho do cupua√ßu com o doce do a√ßa√≠.", price: 18.00, image: "https://i.ibb.co/d5m33jN/acai-500ml.jpg", category: "A√ßa√≠s" }
    ];

    const TOPPINGS = [
        { id: 101, name: "Leite em P√≥", price: 2.00 }, { id: 102, name: "Leite Condensado", price: 2.50 },
        { id: 103, name: "Granola", price: 1.50 }, { id: 104, name: "Banana", price: 1.00 },
        { id: 105, name: "Morango", price: 2.00 }, { id: 106, name: "Creme de Ninho", price: 3.00 }
    ];

    let cart = [];
    let orders = [];
    
    // --- L√ìGICA DE ROTEAMENTO (CLIENTE vs ADMIN) ---
    const checkView = () => {
        if (window.location.hash === "#admin") {
            document.getElementById('customer-view').classList.add('hidden');
            document.getElementById('admin-panel').classList.remove('hidden');
            renderAdminOrders();
        } else {
            document.getElementById('customer-view').classList.remove('hidden');
            document.getElementById('admin-panel').classList.add('hidden');
            renderProducts();
            renderCart();
        }
    };
    window.addEventListener('hashchange', checkView);

    // --- FUN√á√ïES DA VITRINE E MODAL ---
    const renderProducts = () => {
        const productList = document.getElementById('product-list');
        productList.innerHTML = PRODUCTS.map(p => `
            <div class="product-card" onclick="openModal(${p.id})">
                <img src="${p.image}" alt="${p.name}">
                <div class="product-info">
                    <h3>${p.name}</h3>
                    <p>${p.description}</p>
                    <div class="product-price">R$ ${p.price.toFixed(2)}</div>
                </div>
            </div>
        `).join('');
    };

    window.openModal = (productId) => {
        const product = PRODUCTS.find(p => p.id === productId);
        document.getElementById('modal-product-id').value = product.id;
        document.getElementById('modal-product-name').innerText = `Personalize seu ${product.name}`;
        document.getElementById('modal-product-description').innerText = product.description;

        const optionsContainer = document.getElementById('modal-options');
        optionsContainer.innerHTML = `
            <div class="customization-group">
                <h4>Adicionais (Cobrados √† parte):</h4>
                ${TOPPINGS.map(t => `
                    <label>
                        <input type="checkbox" name="topping" value="${t.id}">
                        ${t.name} (+ R$ ${t.price.toFixed(2)})
                    </label>
                `).join('')}
            </div>
        `;
        document.getElementById('customization-modal').classList.remove('hidden');
    };

    // --- L√ìGICA DO CARRINHO ---
    const renderCart = () => {
        const cartContainer = document.getElementById('cart-items-container');
        if (cart.length === 0) {
            cartContainer.innerHTML = '<p>Carrinho vazio.</p>';
        } else {
            cartContainer.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="item-details">
                        <b>${item.name}</b>
                        <small>${item.toppings.map(t => t.name).join(', ') || 'Sem adicionais'}</small>
                    </div>
                    <span>R$ ${item.totalPrice.toFixed(2)}</span>
                    <button onclick="removeFromCart(${index})" style="background:transparent; border:none; color:var(--danger); cursor:pointer;">‚ùå</button>
                </div>
            `).join('');
        }
        
        const total = cart.reduce((sum, item) => sum + item.totalPrice, 0);
        document.getElementById('cart-total-price').innerText = `R$ ${total.toFixed(2)}`;
    };

    window.removeFromCart = (index) => {
        cart.splice(index, 1);
        renderCart();
    };

    document.getElementById('customization-form').onsubmit = (e) => {
        e.preventDefault();
        const productId = parseInt(document.getElementById('modal-product-id').value);
        const product = PRODUCTS.find(p => p.id === productId);

        const selectedToppingIds = Array.from(e.target.elements.topping)
            .filter(input => input.checked)
            .map(input => parseInt(input.value));
        
        const selectedToppings = TOPPINGS.filter(t => selectedToppingIds.includes(t.id));
        const toppingsPrice = selectedToppings.reduce((sum, t) => sum + t.price, 0);

        cart.push({
            cartId: Date.now(),
            name: product.name,
            toppings: selectedToppings,
            totalPrice: product.price + toppingsPrice
        });

        renderCart();
        document.getElementById('customization-modal').classList.add('hidden');
    };
    
    // Fechar modal ao clicar fora
    document.getElementById('customization-modal').onclick = (e) => {
        if (e.target.id === 'customization-modal') {
            e.target.classList.add('hidden');
        }
    };

    // --- L√ìGICA DE FINALIZA√á√ÉO E RASTREIO ---
    document.getElementById('checkout-btn').onclick = () => {
        if (cart.length === 0) return alert('Seu carrinho est√° vazio!');
        
        const newOrder = {
            id: Date.now(),
            items: [...cart],
            total: cart.reduce((sum, item) => sum + item.totalPrice, 0),
            status: 'Pedido Recebido',
            createdAt: new Date()
        };
        orders.push(newOrder);
        
        cart = [];
        renderCart();
        
        document.getElementById('cart-summary').classList.add('hidden');
        document.getElementById('order-tracker').classList.remove('hidden');
        renderOrderTracker(newOrder.id);
        
        // Simula a notifica√ß√£o para o admin
        if(window.location.hash === '#admin') renderAdminOrders();
    };

    const renderOrderTracker = (orderId) => {
        const order = orders.find(o => o.id === orderId);
        if (!order) return;

        const statuses = ['Pedido Recebido', 'Em Prepara√ß√£o', 'Saiu para Entrega', 'Entregue'];
        const currentStatusIndex = statuses.indexOf(order.status);

        const trackerInfo = document.getElementById('tracker-info');
        trackerInfo.innerHTML = `
            <p>Pedido #${order.id}</p>
            <p>Total: R$ ${order.total.toFixed(2)}</p>
            <div class="status-bar">
                ${statuses.map((s, i) => `
                    <div class="status-step ${i <= currentStatusIndex ? 'active' : ''}">${s}</div>
                `).join('')}
            </div>
        `;

        // Continuamente checa por atualiza√ß√µes de status
        setTimeout(() => renderOrderTracker(orderId), 2000);
    };

    // --- FUN√á√ïES DO PAINEL ADMIN ---
    const renderAdminOrders = () => {
        const orderList = document.getElementById('admin-orders-list');
        if (orders.length === 0) {
            orderList.innerHTML = '<p>Nenhum pedido recebido ainda.</p>';
            return;
        }

        orderList.innerHTML = orders.slice().reverse().map(o => `
            <div class="order-card">
                <h4>Pedido #${o.id} - R$ ${o.total.toFixed(2)}</h4>
                <small>${o.items.map(i => `${i.name} (${i.toppings.map(t=>t.name).join(', ') || 'Puro'})`).join('; ')}</small>
                <div style="margin-top: 1rem;">
                    <label for="status-${o.id}">Status: </label>
                    <select id="status-${o.id}" onchange="updateOrderStatus(${o.id}, this.value)">
                        <option value="Pedido Recebido" ${o.status === 'Pedido Recebido' ? 'selected' : ''}>Recebido</option>
                        <option value="Em Prepara√ß√£o" ${o.status === 'Em Prepara√ß√£o' ? 'selected' : ''}>Em Prepara√ß√£o</option>
                        <option value="Saiu para Entrega" ${o.status === 'Saiu para Entrega' ? 'selected' : ''}>Saiu para Entrega</option>
                        <option value="Entregue" ${o.status === 'Entregue' ? 'selected' : ''}>Entregue</option>
                    </select>
                </div>
            </div>
        `).join('');
    };

    window.updateOrderStatus = (orderId, newStatus) => {
        const order = orders.find(o => o.id === orderId);
        if (order) {
            order.status = newStatus;
            console.log(`Status do pedido ${orderId} atualizado para ${newStatus}`);
        }
    };

    // --- INICIALIZA√á√ÉO ---
    checkView();
});
</script>

</body>
</html>
