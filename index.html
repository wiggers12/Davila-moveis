<!DOCTYPE html>

<html lang="pt-BR">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>AÃ§aÃ­ da Barra Poa ğŸ‘‘</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<style>

:root{

Â  --primary:#9d4edd;--secondary:#ffb347;--success:#2ecc71;--info:#4dabf7;--danger:#ff4d6d;

Â  --dark-bg:#0f0f1a;--card-bg:rgba(255,255,255,.08);

Â  --light:#fff;--shadow:0 8px 25px rgba(0,0,0,.4);

}

*{box-sizing:border-box;margin:0;padding:0;}

body{font-family:'Poppins',sans-serif;background:var(--dark-bg);color:var(--light);}

header{background:linear-gradient(135deg,#7b2cbf,#5a189a);color:#fff;padding:1.5rem;text-align:center;box-shadow:var(--shadow);}

nav{background:rgba(20,20,40,.8);backdrop-filter:blur(12px);display:flex;overflow-x:auto;position:sticky;top:0;z-index:100;}

nav button{flex:1;min-width:120px;border:none;background:none;padding:1rem;font-weight:600;cursor:pointer;color:#aaa;transition:.2s;position:relative;}

nav button.active{color:var(--primary);text-shadow:0 0 8px var(--primary);}

nav button:hover{background:rgba(255,255,255,.05);}

.badge{position:absolute;top:5px;right:20px;background:var(--danger);color:#fff;font-size:.7rem;padding:2px 6px;border-radius:50%;display:none;}

section{display:none;padding:1.5rem;max-width:1200px;margin:auto;}

section.active{display:block;}

/* Produtos */

.swiper{width:100%;padding:1rem 0;}

.swiper-slide{background:var(--card-bg);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;text-align:center;transition:0.2s;}

.swiper-slide.added{box-shadow:0 0 15px var(--success);}

.swiper-slide img,.swiper-slide video{width:100%;height:220px;object-fit:cover;}

.product-info{padding:1rem;}

.order-button{background:linear-gradient(145deg,#9d4edd,#5a189a);color:#fff;border:none;padding:.7rem 1.2rem;border-radius:10px;cursor:pointer;font-weight:600;transition:.2s;}

.order-button:disabled{background:#555;cursor:not-allowed;}

.order-button:active{transform:scale(0.95);}

/* Modal complementos */

#modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:1500;animation:fadeIn .3s;}

#modal-content{background:#fff;color:#000;padding:1.5rem;border-radius:12px;width:90%;max-width:400px;animation:zoomIn .3s;}

#modal-content h3{margin-bottom:1rem;}

.topping{margin:.3rem 0;}

/* Carrinho */

.cart-container{background:var(--card-bg);padding:1.5rem;border-radius:16px;box-shadow:var(--shadow);}

.cart-item{display:flex;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.1);padding:.5rem 0;}

.cart-total{font-weight:700;color:var(--secondary);text-align:right;margin-top:1rem;font-size:1.1rem;}

.btn-finish{background:linear-gradient(145deg,#2ecc71,#208d4e);color:#fff;border:none;padding:1rem;border-radius:10px;width:100%;margin-top:1rem;font-weight:700;cursor:pointer;transition:.2s;}

.btn-finish:active{transform:scale(0.95);}

/* LogÃ­stica e Pedidos */

.order-card{background:var(--card-bg);padding:1rem;margin:.8rem 0;border-radius:12px;box-shadow:var(--shadow);}

.status{padding:.3rem .6rem;border-radius:8px;font-size:.8rem;font-weight:600;display:inline-block;}

.status-Recebido{background:var(--info);}

.status-PreparaÃ§Ã£o{background:var(--secondary);}

.status-Saiu{background:#ffa94d;}

.status-ConcluÃ­do{background:var(--success);}

.status-Cancelado{background:var(--danger);}

.action-btn{margin:.2rem;padding:.4rem .7rem;border:none;border-radius:6px;cursor:pointer;font-size:.8rem;}

.remove-btn{background:var(--danger);color:#fff;}

/* Financeiro */

.kpi-container{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem;}

.kpi-card{flex:1;min-width:200px;background:var(--card-bg);padding:1rem;border-radius:12px;box-shadow:var(--shadow);text-align:center;}

.kpi-card h4{font-size:1rem;color:#ccc;}

.kpi-card p{font-size:1.4rem;font-weight:700;color:var(--primary);}

/* Splash */

#splash{position:fixed;top:0;left:0;width:100%;height:100%;

Â  background:linear-gradient(135deg,#7b2cbf,#ffb347);

Â  display:flex;align-items:center;justify-content:center;

Â  z-index:2000;color:#fff;animation:fadeIn 1s;}

.splash-content{text-align:center;animation:zoomIn 1s;}

.splash-content h1{font-size:4rem;margin:0;}

.splash-content h2{margin:0;font-size:2rem;}

/* Toast */

#toast{position:fixed;bottom:20px;right:20px;background:var(--card-bg);color:#fff;padding:1rem 1.5rem;border-radius:8px;box-shadow:var(--shadow);display:none;z-index:3000;}

@keyframes zoomIn{from{transform:scale(.8);opacity:0;}to{transform:scale(1);opacity:1;}}

@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

</style>

</head>

<body>



<!-- SPLASH -->

<div id="splash">

Â  <div class="splash-content">

Â  Â  <h1>ğŸ‘‘</h1>

Â  Â  <h2>AÃ§aÃ­ da Barra Poa</h2>

Â  Â  <p>Carregando...</p>

Â  </div>

</div>



<!-- TOAST -->

<div id="toast"></div>



<!-- MODAL COMPLEMENTOS -->

<div id="modal">

Â  <div id="modal-content">

Â  Â  <h3>Escolha complementos</h3>

Â  Â  <div id="toppings"></div>

Â  Â  <button onclick="confirmAdd()">Adicionar</button>

Â  Â  <button onclick="closeModal()">Cancelar</button>

Â  </div>

</div>



<!-- APP -->

<div id="app" style="display:none;">



<header>

Â  <h1>AÃ§aÃ­ da Barra Poa ğŸ‘‘</h1>

Â  <p>GestÃ£o completa: Vitrine, Estoque, Pedidos, Financeiro e LogÃ­stica</p>

</header>



<nav>

Â  <button class="active" onclick="showTab('catalogo')">ğŸ›’ CatÃ¡logo</button>

Â  <button onclick="showTab('carrinho')">ğŸ› Carrinho <span id="cart-badge" class="badge"></span></button>

Â  <button onclick="showTab('pedidos')">ğŸ“¦ Pedidos <span id="orders-badge" class="badge"></span></button>

Â  <button onclick="showTab('financeiro')">ğŸ’° Financeiro</button>

Â  <button onclick="showTab('estoque')">ğŸ“Š Estoque</button>

Â  <button onclick="showTab('logistica')">ğŸšš LogÃ­stica</button>

</nav>



<!-- CatÃ¡logo -->

<section id="catalogo" class="active">

Â  <h2>Monte seu AÃ§aÃ­</h2>

Â  <div class="swiper">

Â  Â  <div class="swiper-wrapper" id="products-container"></div>

Â  </div>

</section>



<!-- Carrinho -->

<section id="carrinho">

Â  <h2>ğŸ› Seu Pedido</h2>

Â  <div class="cart-container">

Â  Â  <div id="cart-items"><p>Seu carrinho estÃ¡ vazio</p></div>

Â  Â  <div class="cart-total">Total: <span id="cart-total-price">R$ 0,00</span></div>

Â  Â  <button class="btn-finish" id="finish-order-button" disabled>Finalizar Pedido</button>

Â  </div>

</section>



<!-- Pedidos -->

<section id="pedidos"><h2>ğŸ“¦ Pedidos</h2><div id="orders-list"></div></section>



<!-- Financeiro -->

<section id="financeiro">

Â  <h2>ğŸ’° Financeiro</h2>

Â  <div class="kpi-container">

Â  Â  <div class="kpi-card"><h4>Faturamento Total</h4><p id="kpi-revenue">R$ 0,00</p></div>

Â  Â  <div class="kpi-card"><h4>Pedidos ConcluÃ­dos</h4><p id="kpi-orders">0</p></div>

Â  Â  <div class="kpi-card"><h4>Ticket MÃ©dio</h4><p id="kpi-avg">R$ 0,00</p></div>

Â  Â  <div class="kpi-card"><h4>Total de Frete</h4><p id="kpi-frete">R$ 0,00</p></div>

Â  </div>

Â  <canvas id="salesChart"></canvas>

</section>



<!-- Estoque -->

<section id="estoque">

Â  <h2>ğŸ“Š Estoque</h2>

Â  <div style="margin-bottom:1rem;">

Â  Â  <input id="new-name" placeholder="Nome do produto">

Â  Â  <input id="new-price" placeholder="PreÃ§o" type="number">

Â  Â  <input id="new-cost" placeholder="Custo" type="number">

Â  Â  <input id="new-stock" placeholder="Estoque inicial" type="number">

Â  Â  <input id="new-media" type="file" accept="image/*,video/*">

Â  Â  <button onclick="addProduct()">Adicionar Produto</button>

Â  </div>

Â  <div id="stock-list"></div>

</section>



<!-- LogÃ­stica -->

<section id="logistica"><h2>ğŸšš LogÃ­stica</h2><div id="logistics-list"></div></section>



</div> <!-- fim app -->



<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>

/* Splash */

window.addEventListener("load",()=>{setTimeout(()=>{document.getElementById("splash").style.display="none";document.getElementById("app").style.display="block";},2000);});



/* Toast */

function showToast(msg){

Â  let t=document.getElementById("toast");

Â  t.innerText=msg;t.style.display="block";

Â  setTimeout(()=>{t.style.display="none";},3000);

}



/* Dados */

let cart=[],orders=JSON.parse(localStorage.getItem("acaiOrders"))||[];

let PRODUCTS=JSON.parse(localStorage.getItem("acaiProducts"))||[];

const FRETE_FIXO=5.0;

const TOPPINGS=[{name:"Leite em pÃ³",price:2},{name:"Morango",price:3},{name:"Granola",price:2},{name:"Leite condensado",price:2.5}];



/* NavegaÃ§Ã£o */

function showTab(id){document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");render();}



/* Modal complementos */

let selectedProduct=null,selectedToppings=[];

function openModal(id){

Â  selectedProduct=PRODUCTS.find(p=>p.id===id);selectedToppings=[];

Â  document.getElementById("toppings").innerHTML=TOPPINGS.map((t,i)=>`<div class="topping"><label><input type="checkbox" value="${i}">${t.name} (+R$ ${t.price})</label></div>`).join("");

Â  document.getElementById("modal").style.display="flex";

}

function closeModal(){document.getElementById("modal").style.display="none";}

function confirmAdd(){

Â  let checkboxes=document.querySelectorAll("#toppings input:checked");

Â  let total=selectedProduct.price;let toppingsChosen=[];

Â  checkboxes.forEach(c=>{let t=TOPPINGS[c.value];toppingsChosen.push(t);total+=t.price;});

Â  cart.push({product:selectedProduct,toppings:toppingsChosen,total:total});

Â  selectedProduct.stock--;saveProducts();closeModal();updateCart();

Â  showToast("Produto adicionado ao carrinho!");

}



/* Render produtos */

function renderProducts(){

Â document.getElementById("products-container").innerHTML=PRODUCTS.map(p=>`

Â  Â <div class="swiper-slide">

Â  Â  Â ${p.media.includes("video")?`<video src="${p.media}" controls></video>`:`<img src="${p.media}" alt="${p.name}">`}

Â  Â  Â <div class="product-info">

Â  Â  Â  Â <h3>${p.name}</h3><p><strong>R$ ${p.price}</strong></p>

Â  Â  Â  Â <button class="order-button" onclick="openModal(${p.id})" ${p.stock<=0?"disabled":""}>${p.stock<=0?"Sem estoque":"Selecionar"}</button>

Â  Â  Â </div>

Â  Â </div>`).join("");

Â new Swiper(".swiper",{slidesPerView:1,loop:true});

}



/* Carrinho */

function updateCart(){

Â let c=document.getElementById("cart-items");

Â if(cart.length==0){c.innerHTML="<p>Seu carrinho estÃ¡ vazio</p>";}

Â else{c.innerHTML=cart.map(it=>`<div class="cart-item">${it.product.name} ${it.toppings.length?"+ "+it.toppings.map(t=>t.name).join(", "):""} <span>R$ ${it.total}</span></div>`).join("");}

Â document.getElementById("cart-total-price").innerText="R$ "+cart.reduce((s,i)=>s+i.total,0).toFixed(2);

Â document.getElementById("finish-order-button").disabled=cart.length==0;

Â document.getElementById("cart-badge").style.display=cart.length>0?"inline-block":"none";

Â document.getElementById("cart-badge").innerText=cart.length;

}

document.getElementById("finish-order-button").addEventListener("click",finalizarPedido);



function finalizarPedido(){

Â let subtotal=cart.reduce((s,i)=>s+i.total,0);

Â let o={id:Date.now(),customerName:"",phone:"",deliveryType:"",address:"",notes:"",payment:"",items:cart,totalItems:subtotal,frete:0,total:subtotal,status:"Recebido",createdAt:new Date().toLocaleString()};

Â orders.push(o);localStorage.setItem("acaiOrders",JSON.stringify(orders));cart=[];updateCart();showTab('logistica');render();

Â showToast("Pedido registrado e enviado para logÃ­stica!");

}



/* Estoque */

function addProduct(){

Â let file=document.getElementById("new-media").files[0];let reader=new FileReader();

Â reader.onload=function(e){let p={id:Date.now(),name:document.getElementById("new-name").value,price:parseFloat(document.getElementById("new-price").value),cost:parseFloat(document.getElementById("new-cost").value),stock:parseInt(document.getElementById("new-stock").value),media:e.target.result};PRODUCTS.push(p);saveProducts();render();};

Â if(file) reader.readAsDataURL(file);

}

function saveProducts(){localStorage.setItem("acaiProducts",JSON.stringify(PRODUCTS));}

function removeProduct(id){PRODUCTS=PRODUCTS.filter(p=>p.id!==id);saveProducts();render();}

function renderStock(){document.getElementById("stock-list").innerHTML=PRODUCTS.map(p=>`${p.name} - R$ ${p.price} - Estoque:${p.stock} <button class="remove-btn" onclick="removeProduct(${p.id})">Remover</button>`).join("<br>");}



/* Pedidos */

function renderOrders(){

Â document.getElementById("orders-list").innerHTML=orders.map(o=>`

Â  Â <div class="order-card">

Â  Â  Â <strong>Pedido #${o.id}</strong><br>

Â  Â  Â Itens:<ul>${o.items.map(i=>`<li>${i.product.name} ${i.toppings.length?`+ ${i.toppings.map(t=>t.name).join(", ")}`:""} - R$ ${i.total}</li>`).join("")}</ul>

Â  Â  Â Subtotal: R$ ${o.totalItems.toFixed(2)} | Total: R$ ${o.total.toFixed(2)}<br>

Â  Â  Â <span class="status status-${o.status}">${o.status}</span>

Â  Â </div>`).join("");

Â document.getElementById("orders-badge").style.display=orders.length>0?"inline-block":"none";

Â document.getElementById("orders-badge").innerText=orders.filter(o=>o.status!=="ConcluÃ­do"&&o.status!=="Cancelado").length;

}



/* LogÃ­stica */

function renderLogistics(){

Â let c=document.getElementById("logistics-list");

Â if(orders.length===0){c.innerHTML="<p>Nenhum pedido na logÃ­stica.</p>";return;}

Â c.innerHTML=orders.map(o=>`

Â  Â <div class="order-card">

Â  Â  Â <strong>Pedido #${o.id}</strong><br>

Â  Â  Â Cliente: <input placeholder="Nome" value="${o.customerName}" onchange="o.customerName=this.value;saveOrders()">Â 

Â  Â  Â Tel: <input placeholder="Telefone" value="${o.phone}" onchange="o.phone=this.value;saveOrders()"><br>

Â  Â  Â Entrega: <select onchange="setDelivery(${o.id},this.value)">

Â  Â  Â  Â <option ${o.deliveryType==="Retirada"?"selected":""}>Retirada</option>

Â  Â  Â  Â <option ${o.deliveryType==="Entrega"?"selected":""}>Entrega</option>

Â  Â  Â </select><br>

Â  Â  Â ${o.deliveryType==="Entrega"?`EndereÃ§o:<input value="${o.address}" onchange="o.address=this.value;saveOrders()"><br>ObservaÃ§Ãµes:<input value="${o.notes}" onchange="o.notes=this.value;saveOrders()">`:``}

Â  Â  Â Pagamento: <select onchange="o.payment=this.value;saveOrders()"><option>Pix</option><option>Dinheiro</option><option>CartÃ£o</option></select><br>

Â  Â  Â Subtotal: R$ ${o.totalItems.toFixed(2)} | Frete: R$ ${o.frete.toFixed(2)} | <strong>Total: R$ ${o.total.toFixed(2)}</strong><br>

Â  Â  Â <small>Data: ${o.createdAt}</small><br>

Â  Â  Â <span class="status status-${o.status}">${o.status}</span>

Â  Â  Â <br><select onchange="updateStatus(${o.id},this.value)">

Â  Â  Â  Â <option ${o.status==="Recebido"?"selected":""}>Recebido</option>

Â  Â  Â  Â <option ${o.status==="PreparaÃ§Ã£o"?"selected":""}>PreparaÃ§Ã£o</option>

Â  Â  Â  Â <option ${o.status==="Saiu"?"selected":""}>Saiu</option>

Â  Â  Â  Â <option ${o.status==="ConcluÃ­do"?"selected":""}>ConcluÃ­do</option>

Â  Â  Â  Â <option ${o.status==="Cancelado"?"selected":""}>Cancelado</option>

Â  Â  Â </select>

Â  Â </div>`).join("");

}

function setDelivery(id,val){

Â let o=orders.find(x=>x.id===id);if(!o)return;

Â o.deliveryType=val;

Â if(val==="Entrega"){o.frete=FRETE_FIXO;o.total=o.totalItems+o.frete;}

Â else{o.frete=0;o.total=o.totalItems;}

Â saveOrders();renderLogistics();

}

function updateStatus(id,newStatus){

Â let o=orders.find(x=>x.id===id);if(o){o.status=newStatus;saveOrders();renderLogistics();renderOrders();showToast("Status do pedido atualizado para "+newStatus);}

}

function saveOrders(){localStorage.setItem("acaiOrders",JSON.stringify(orders));}



/* Financeiro */

function renderFinance(){

Â let concluidos=orders.filter(o=>o.status==="ConcluÃ­do");

Â let faturamento=concluidos.reduce((s,o)=>s+o.total,0);

Â let freteTotal=concluidos.reduce((s,o)=>s+o.frete,0);

Â let avg=concluidos.length?faturamento/concluidos.length:0;

Â document.getElementById("kpi-revenue").innerText="R$ "+faturamento.toFixed(2);

Â document.getElementById("kpi-orders").innerText=concluidos.length;

Â document.getElementById("kpi-avg").innerText="R$ "+avg.toFixed(2);

Â document.getElementById("kpi-frete").innerText="R$ "+freteTotal.toFixed(2);

Â let salesByDay=concluidos.reduce((acc,o)=>{let d=new Date(o.createdAt).toLocaleDateString();acc[d]=(acc[d]||0)+o.total;return acc;},{});Â Â 

Â let ctx=document.getElementById("salesChart").getContext("2d");

Â if(window.salesChart)window.salesChart.destroy();

Â window.salesChart=new Chart(ctx,{type:"bar",data:{labels:Object.keys(salesByDay),datasets:[{label:"Faturamento diÃ¡rio",data:Object.values(salesByDay),backgroundColor:"rgba(157,77,237,0.7)"}]},options:{scales:{y:{beginAtZero:true}}}});

}



/* Render */

function render(){renderProducts();renderStock();renderOrders();renderLogistics();renderFinance();}

render();

</script>

</body>

</html>
