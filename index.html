<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A√ßa√≠ Imperial üëë</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --primary:#6a0dad;--secondary:#f39c12;--success:#2ecc71;--info:#3498db;--danger:#e74c3c;
  --bg:#f4f4f9;--light:#fff;--dark:#333;--shadow:0 4px 15px rgba(0,0,0,.1);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Poppins',sans-serif;background:var(--bg);color:var(--dark);}
header{background:linear-gradient(135deg,var(--primary),#8e44ad);color:#fff;padding:1rem;text-align:center;}
nav{background:#fff;box-shadow:var(--shadow);display:flex;justify-content:center;gap:.5rem;position:sticky;top:0;z-index:100;}
nav button{border:none;background:none;padding:1rem;font-weight:600;cursor:pointer;}
nav button.active{color:var(--primary);border-bottom:3px solid var(--primary);}
section{display:none;padding:2rem;max-width:1200px;margin:auto;}
section.active{display:block;}
/* Produtos */
.products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;}
.product-card{background:#fff;border-radius:10px;box-shadow:var(--shadow);overflow:hidden;text-align:center;}
.product-card img{width:100%;height:150px;object-fit:cover;}
.product-info{padding:1rem;}
.order-button{background:var(--primary);color:#fff;border:none;padding:.6rem 1rem;border-radius:8px;cursor:pointer;}
/* Carrinho */
.cart-container{background:#fff;padding:1rem;border-radius:10px;box-shadow:var(--shadow);margin-top:2rem;}
.cart-item{display:flex;justify-content:space-between;border-bottom:1px solid #eee;padding:.5rem 0;}
.cart-total{font-weight:700;color:var(--primary);text-align:right;margin-top:1rem;}
.btn-finish{background:var(--success);color:#fff;border:none;padding:.7rem;border-radius:8px;width:100%;margin-top:1rem;}
/* Admin cards */
.kpi-card{background:#fff;padding:1rem;border-radius:10px;box-shadow:var(--shadow);text-align:center;margin:1rem;flex:1;}
.order-list-item{background:#fff;padding:1rem;margin:1rem 0;border-radius:10px;box-shadow:var(--shadow);}
.order-status{padding:.3rem .6rem;border-radius:8px;color:#fff;font-size:.8rem;}
.status-Recebido{background:var(--info);} .status-Em{background:var(--secondary);}
.status-Conclu√≠do{background:var(--success);} .status-Cancelado{background:var(--danger);}
</style>
</head>
<body>

<header>
  <h1>A√ßa√≠ Imperial üëë</h1>
  <p>Monte, pe√ßa e gerencie tudo em um s√≥ lugar</p>
</header>

<nav>
  <button class="active" onclick="showTab('catalogo')">üõí Cat√°logo</button>
  <button onclick="showTab('pedidos')">üì¶ Pedidos</button>
  <button onclick="showTab('financeiro')">üí∞ Financeiro</button>
  <button onclick="showTab('estoque')">üìä Estoque</button>
  <button onclick="showTab('logistica')">üöö Log√≠stica</button>
</nav>

<!-- Cat√°logo -->
<section id="catalogo" class="active">
  <h2>Monte seu A√ßa√≠</h2>
  <div class="products-grid" id="products-container"></div>
  <div class="cart-container">
    <h3>Seu Pedido</h3>
    <div id="cart-items"><p>Seu carrinho est√° vazio</p></div>
    <div class="cart-total">Total: <span id="cart-total-price">R$ 0,00</span></div>
    <input id="client-name" placeholder="Seu nome">
    <input id="client-address" placeholder="Endere√ßo">
    <select id="payment-method"><option>Pix</option><option>Dinheiro</option><option>Cart√£o</option></select>
    <button class="btn-finish" id="finish-order-button" disabled>Finalizar Pedido</button>
  </div>
</section>

<!-- Pedidos -->
<section id="pedidos">
  <h2>Pedidos</h2>
  <div id="orders-list"></div>
</section>

<!-- Financeiro -->
<section id="financeiro">
  <h2>Financeiro</h2>
  <div style="display:flex;flex-wrap:wrap;">
    <div class="kpi-card"><h4>Faturamento</h4><p id="kpi-revenue">R$ 0,00</p></div>
    <div class="kpi-card"><h4>Lucro L√≠quido</h4><p id="kpi-profit">R$ 0,00</p></div>
    <div class="kpi-card"><h4>Ticket M√©dio</h4><p id="kpi-avg">R$ 0,00</p></div>
  </div>
  <canvas id="salesChart"></canvas>
</section>

<!-- Estoque -->
<section id="estoque">
  <h2>Estoque</h2>
  <div id="stock-list"></div>
</section>

<!-- Log√≠stica -->
<section id="logistica">
  <h2>Log√≠stica</h2>
  <div id="logistics-list"></div>
</section>

<script>
let cart=[],orders=JSON.parse(localStorage.getItem("acaiOrders"))||[];
const PRODUCTS=[{id:1,name:"Copo 300ml",price:12,cost:6,stock:10,image:"https://source.unsplash.com/300x200/?acai"},
{id:2,name:"Copo 500ml",price:18,cost:9,stock:10,image:"https://source.unsplash.com/300x201/?acai"},
{id:3,name:"Barca",price:35,cost:18,stock:5,image:"https://source.unsplash.com/300x202/?acai"}];
const TOPPINGS=[{name:"Leite em p√≥",price:2,cost:1,stock:20},{name:"Morango",price:3,cost:1.5,stock:15}];

// Tabs
function showTab(id){document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));event.target.classList.add("active");if(id==="pedidos")renderOrders();if(id==="financeiro")renderFinance();if(id==="estoque")renderStock();if(id==="logistica")renderLogistics();}

// Produtos
function renderProducts(){document.getElementById("products-container").innerHTML=PRODUCTS.map(p=>`
<div class="product-card">
<img src="${p.image}"><div class="product-info"><h3>${p.name}</h3><p>R$ ${p.price}</p>
<button class="order-button" onclick="addToCart(${p.id})">Adicionar</button></div></div>`).join("");}
function addToCart(id){let p=PRODUCTS.find(x=>x.id===id);if(p&&p.stock>0){cart.push({product:p,total:p.price});updateCart();}else{alert("Sem estoque!");}}
function updateCart(){let c=document.getElementById("cart-items");if(cart.length==0){c.innerHTML="<p>Seu carrinho est√° vazio</p>";}
else{c.innerHTML=cart.map((it,i)=>`<div class="cart-item"><span>${it.product.name}</span><span>R$ ${it.total}</span><button onclick="removeFromCart(${i})">‚ùå</button></div>`).join("");}
document.getElementById("cart-total-price").innerText="R$ "+cart.reduce((s,i)=>s+i.total,0).toFixed(2);checkForm();}
function removeFromCart(i){cart.splice(i,1);updateCart();}
function checkForm(){document.getElementById("finish-order-button").disabled=!(document.getElementById("client-name").value&&document.getElementById("client-address").value&&cart.length>0);}
document.getElementById("client-name").addEventListener("input",checkForm);document.getElementById("client-address").addEventListener("input",checkForm);
document.getElementById("finish-order-button").addEventListener("click",finalizarPedido);

// Pedido
function finalizarPedido(){let o={id:Date.now(),customerName:document.getElementById("client-name").value,customerAddress:document.getElementById("client-address").value,payment:document.getElementById("payment-method").value,items:cart,total:cart.reduce((s,i)=>s+i.total,0),status:"Recebido",createdAt:new Date().toISOString()};orders.push(o);localStorage.setItem("acaiOrders",JSON.stringify(orders));baixarEstoque(o);cart=[];updateCart();alert("Pedido realizado!");}
function renderOrders(){document.getElementById("orders-list").innerHTML=orders.map(o=>`
<div class="order-list-item"><strong>Pedido #${o.id}</strong><br>${o.customerName} - ${o.customerAddress}<br>Total: R$ ${o.total}<br>Status:
<select onchange="updateStatus(${o.id},this.value)">
<option ${o.status==="Recebido"?"selected":""}>Recebido</option>
<option ${o.status==="Em"?"selected":""}>Em</option>
<option ${o.status==="Saiu para Entrega"?"selected":""}>Saiu para Entrega</option>
<option ${o.status==="Conclu√≠do"?"selected":""}>Conclu√≠do</option>
<option ${o.status==="Cancelado"?"selected":""}>Cancelado</option>
</select></div>`).join("");}
function updateStatus(id,s){let o=orders.find(x=>x.id===id);if(o){o.status=s;localStorage.setItem("acaiOrders",JSON.stringify(orders));renderOrders();}}

// Financeiro
function renderFinance(){let done=orders.filter(o=>o.status==="Conclu√≠do");let rev=done.reduce((s,o)=>s+o.total,0);let cost=0;done.forEach(o=>o.items.forEach(it=>cost+=it.product.cost));let profit=rev-cost;let avg=done.length?rev/done.length:0;document.getElementById("kpi-revenue").innerText="R$ "+rev.toFixed(2);document.getElementById("kpi-profit").innerText="R$ "+profit.toFixed(2);document.getElementById("kpi-avg").innerText="R$ "+avg.toFixed(2);
let ctx=document.getElementById("salesChart").getContext("2d");if(window.salesChart)window.salesChart.destroy();window.salesChart=new Chart(ctx,{type:"bar",data:{labels:done.map(o=>new Date(o.createdAt).toLocaleDateString()),datasets:[{label:"Vendas",data:done.map(o=>o.total),backgroundColor:"rgba(106,13,173,.7)"}]},options:{scales:{y:{beginAtZero:true}}}});}

// Estoque
function baixarEstoque(order){order.items.forEach(it=>{let p=PRODUCTS.find(x=>x.id===it.product.id);if(p) p.stock--;});}
function renderStock(){document.getElementById("stock-list").innerHTML="<h4>Produtos</h4>"+PRODUCTS.map(p=>`${p.name} - Estoque: ${p.stock} ${p.stock<3?"‚ö†":""}`).join("<br>");}

// Log√≠stica
const entregadores=[{nome:"Carlos",fone:"5199999999"},{nome:"Ana",fone:"5198888888"}];
function renderLogistics(){let c=document.getElementById("logistics-list");let pend=orders.filter(o=>o.status==="Saiu para Entrega");c.innerHTML=pend.map(o=>`<div class="order-list-item"><strong>Pedido #${o.id}</strong><br>${o.customerName}<br>${o.customerAddress}<br><a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.customerAddress)}" target="_blank">Abrir no Maps</a><br><select onchange="atribuir(${o.id},this.value)"><option>Entregador</option>${entregadores.map(e=>`<option>${e.nome}</option>`).join("")}</select></div>`).join("")||"Nenhuma entrega em andamento";}
function atribuir(id,nome){let o=orders.find(x=>x.id===id);if(o){o.entregador=nome;localStorage.setItem("acaiOrders",JSON.stringify(orders));alert("Pedido #"+id+" atribu√≠do a "+nome);}}

// Init
renderProducts();updateCart();
</script>
</body>
</html>